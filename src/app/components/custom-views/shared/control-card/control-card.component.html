<div class="control-card">
  <!-- Control Header -->
  @if (!hideControlName) {
    <div class="control-header">
      <span class="control-name" [title]="control.name">{{ displayName }}</span>
      @if (!hideTypeBadge) {
        <span class="control-type-badge">{{ typeBadge }}</span>
      }
    </div>
  }

  <!-- Control Body -->
  <div class="control-body">
    @if (isSupported) {
      @switch (control.type) {
        @case ('Knob') {
          <app-knob-control
            [control]="control"
            mode="inline"
            (positionChange)="positionChange.emit($event)"
            (dragStart)="dragStart.emit()"
            (dragEnd)="dragEnd.emit()"
          />
        }
        @case ('Boolean') {
          <app-boolean-control
            [control]="control"
            (valueChange)="valueChange.emit($event)"
          />
        }
        @case ('Float') {
          <app-numeric-control
            [control]="control"
            (valueChange)="valueChange.emit($event)"
          />
        }
        @case ('Integer') {
          <app-numeric-control
            [control]="control"
            (valueChange)="valueChange.emit($event)"
          />
        }
        @case ('Combo box') {
          <app-combo-control
            [control]="control"
            (valueChange)="valueChange.emit($event)"
          />
        }
        @case ('Text') {
          <app-text-control
            [control]="control"
            (valueChange)="valueChange.emit($event)"
          />
        }
        @case ('Trigger') {
          <app-trigger-control
            [control]="control"
            (trigger)="valueChange.emit(1)"
          />
        }
        @case ('State Trigger') {
          <app-state-trigger-control
            [control]="control"
            (valueChange)="valueChange.emit($event)"
          />
        }
        @case ('Time') {
          <app-time-control
            [control]="control"
            (valueChange)="valueChange.emit($event)"
          />
        }
        @case ('Status') {
          <app-status-control
            [control]="control"
            mode="inline"
            (valueChange)="valueChange.emit($event)"
          />
        }
      }
    } @else {
      <div class="unsupported">
        <span class="unsupported-icon">⚠️</span>
        <span class="unsupported-text">{{ control.type }}</span>
      </div>
    }
  </div>

  <!-- Control Footer (Component Name) -->
  @if (showComponentName && control.componentName) {
    <div class="control-footer">
      <span class="component-badge" [title]="control.componentName">
        {{ control.componentName }}
      </span>
    </div>
  }
</div>
