<div class="qsys-cameras-card bg-light">
  <!-- Camera Selection Dropdown -->
  @if (hasOnvifCameras() && cameraOptions().length > 0) {
    <div class="camera-selection">
      <label for="onvif-camera-select" class="camera-select-label">Select Camera:</label>
      <select
        id="onvif-camera-select"
        class="camera-select"
        [value]="selectedCameraName()"
        (change)="onCameraSelect($event)">
        @for (camera of cameraOptions(); track camera.componentName) {
          <option [value]="camera.componentName">{{ camera.displayName }}</option>
        }
      </select>
    </div>
  }

  <div class="camera-controls-container">
    <!-- Pan/Tilt Controls (Left Side) -->
    <div class="pan-tilt-section">
      <div class="pan-tilt-grid">
        <!-- Camera Preview Background -->
        @if (cameraPreviewUrl()) {
          <img
            class="camera-preview"
            [src]="cameraPreviewUrl()"
            alt="Camera Preview"
            draggable="false">
        }

        <!-- Pan/Tilt Control Buttons -->
        @for (control of panTiltControls; track control.controlName) {
          <button
            class="pan-tilt-btn"
            [attr.data-position]="control.position"
            (mousedown)="activateControl(control.controlName)"
            (mouseup)="deactivateControl(control.controlName)"
            (mouseleave)="deactivateControl(control.controlName)"
            (touchstart)="activateControl(control.controlName)"
            (touchend)="deactivateControl(control.controlName)">
            <span class="material-icons">{{ control.icon }}</span>
          </button>
        }
      </div>
    </div>

    <!-- Zoom and Privacy Controls (Right Side) -->
    <div class="zoom-section">
      @for (control of zoomControls; track control.controlName; let idx = $index) {
        <div class="zoom-control-item">
          <div class="zoom-label">{{ idx === 0 ? videoPrivacyText() : idx === 1 ? zoomInText() : zoomOutText() }}</div>
          @if (idx === 0) {
            <!-- Video Privacy Toggle Button -->
            <button
              class="zoom-btn"
              [class.privacy-on]="isPrivacyOn()"
              (click)="togglePrivacy()">
              <span class="material-icons">{{ isPrivacyOn() ? 'videocam_off' : 'videocam' }}</span>
            </button>
          } @else {
            <!-- Zoom In/Out Buttons (Press and Hold) -->
            <button
              class="zoom-btn"
              (mousedown)="activateControl(control.controlName)"
              (mouseup)="deactivateControl(control.controlName)"
              (mouseleave)="deactivateControl(control.controlName)"
              (touchstart)="activateControl(control.controlName)"
              (touchend)="deactivateControl(control.controlName)">
              <span class="material-icons">{{ control.icon }}</span>
            </button>
          }
        </div>
      }
    </div>
  </div>
</div>
